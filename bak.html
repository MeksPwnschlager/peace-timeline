<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <script src="https://d3js.org/d3.v4.js"></script>
    <script src="https://d3js.org/d3-time.v1.js"></script>
    <script src="https://d3js.org/d3-time-format.v2.min.js"></script>

    <style type="text/css">
    svg {
      font-size: 2em;
    }
    g {
      overflow: visible;
    }
    text {
      z-index: 20;
    }
    rect.pane {
      cursor: move;
      fill: none;
      pointer-events: all;
    }
    </style>
  </head>
  <body>
    <div id="container">
        This couldn't be simpler.
    </div>
    <script type="text/javascript">
    var startDate = new Date(0),
    endDate = new Date();
    startDate.setFullYear(1, 0, 0)

    var years = Math.floor((endDate - startDate) / (1000 * 60 * 60 * 24 * 365))

    var w = (years * 12 * 3), // 3px / month
    h = 500;

    var x = d3.scaleTime().range([0, w]);
    x.domain([startDate, endDate]);
    var xAxis = d3.axisBottom(x); //.ticks(years/10).tickFormat(d3.timeFormat("%Y"));

    var svg = d3.select("body").append("svg:svg")
    .attr("width", w)
    .attr("height", h+50)
    .append("svg:g");
    svg.append("svg:g")
    .attr("class", "x axis")
    .attr("transform", "translate(0," + h + ")");
    svg.append("svg:rect")
    .attr("class", "pane")
    .attr("width", w)
    .attr("height", h)

    draw();
    function draw() {
      console.log ("drawing");
      //svg.select("g.x.axis").call(xAxis.ticks(years/10).tickFormat(d3.timeFormat("%Y")));
      svg.select("g.x.axis").call(xAxis.ticks(years).tickFormat(function (d) {
          if (d.getFullYear() % 10 == 0) {
            return d.getFullYear()
          } else {
            return ' '
          }
      }))
    }
    </script>
  </body>
</html>
